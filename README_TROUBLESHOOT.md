# راهنمای عیب‌یابی ربات مدیریت اشتراک تلگرام

اگر با مشکل عدم دسترسی به پنل مدیریت یا سایر مسائل فنی مواجه هستید، از این راهنما استفاده کنید.

## مشکل: پنل مدیریت باز نمی‌شود

### راه‌حل‌های پیشنهادی:

1. **اسکریپت عیب‌یابی خودکار**
   ```bash
   wget -O troubleshoot.sh https://raw.githubusercontent.com/asanseir724/premium-bot/main/troubleshoot.sh
   chmod +x troubleshoot.sh
   sudo ./troubleshoot.sh
   ```
   این اسکریپت به صورت خودکار مشکلات رایج را بررسی و برطرف می‌کند.

2. **اجرای مستقیم ربات**
   ```bash
   wget -O run_direct.sh https://raw.githubusercontent.com/asanseir724/premium-bot/main/run_direct.sh
   chmod +x run_direct.sh
   sudo ./run_direct.sh
   ```
   این اسکریپت ربات را به صورت مستقیم و بدون نیاز به سرویس سیستمی اجرا می‌کند.

3. **بررسی تنظیمات فایروال سرور مجازی**
   بسیاری از ارائه‌دهندگان سرور مجازی (VPS) دارای فایروال داخلی هستند که ممکن است پورت 5000 را مسدود کرده باشند. در پنل مدیریت سرور خود، اطمینان حاصل کنید که پورت 5000 باز است.

4. **بررسی لاگ‌های سرویس**
   ```bash
   sudo journalctl -u telegrambot -f
   ```
   این دستور لاگ‌های سرویس ربات را نمایش می‌دهد تا خطاهای احتمالی را شناسایی کنید.

5. **راه‌اندازی مجدد سرویس**
   ```bash
   sudo systemctl restart telegrambot
   ```
   گاهی اوقات راه‌اندازی مجدد سرویس می‌تواند مشکلات موقت را برطرف کند.

## مشکل: ربات تلگرام پاسخ نمی‌دهد

1. **بررسی توکن ربات**
   اطمینان حاصل کنید که توکن صحیح ربات در فایل `.env` تنظیم شده است.

2. **اجرای ربات در حالت پولینگ**
   ```bash
   cd ~/premium-bot
   python3 start_bot.py
   ```
   این دستور ربات را در حالت پولینگ اجرا می‌کند و خطاهای احتمالی را نشان می‌دهد.

## مشکل: خطاهای پایگاه داده

1. **بررسی اتصال به دیتابیس**
   ```bash
   sudo -u postgres psql -c "SELECT 1;"
   ```
   این دستور بررسی می‌کند که آیا PostgreSQL به درستی کار می‌کند یا خیر.

2. **بازسازی دیتابیس**
   ```bash
   cd ~/premium-bot
   python3 -c "from app import app, db; import models; with app.app_context(): db.create_all()"
   ```
   این دستور ساختار دیتابیس را بازسازی می‌کند.

## برای کمک بیشتر

اگر مشکل شما با این راهنما حل نشد، از طریق Issues در مخزن GitHub گزارش دهید:
https://github.com/asanseir724/premium-bot/issues